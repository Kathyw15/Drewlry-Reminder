<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Drew's Reminder</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary-color: #0B3B29;
      --primary-dark: #08281d;
      --primary-light: #0d4d38;
      --secondary-color: #0B3B29;
      --success-color: #10b981;
      --danger-color: #ef4444;
      --warning-color: #f59e0b;
      --bg-color: #f0f7f4;
      --card-bg: #ffffff;
      --text-primary: #1e293b;
      --text-secondary: #64748b;
      --border-color: #d1e0d9;
      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      --shadow-md: 0 4px 6px -1px rgb(11 59 41 / 0.1), 0 2px 4px -2px rgb(11 59 41 / 0.1);
      --shadow-lg: 0 10px 15px -3px rgb(11 59 41 / 0.1), 0 4px 6px -4px rgb(11 59 41 / 0.1);
      --radius: 12px;
      --radius-sm: 8px;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
        'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
        sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      background: linear-gradient(135deg, #0B3B29 0%, #0d4d38 50%, #0B3B29 100%);
      min-height: 100vh;
      color: var(--text-primary);
    }

    .app {
      min-height: 100vh;
      padding: 1rem 1rem;
    }

    .reminder-page {
      max-width: 1200px;
      margin: 0 auto;
      padding-bottom: 2rem;
    }

    .reminder-header {
      color: white;
      margin-bottom: 0;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      gap: 1.5rem;
    }

    .header-left {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .header-left-content {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .mascot-container {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-shrink: 0;
      margin-left: -50px;
    }

    .mascot-image {
      width: 500px;
      height: 500px;
      object-fit: contain;
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-10px);
      }
    }

    .reminder-header h1 {
      font-family: 'Unbounded', sans-serif;
      font-size: 3rem;
      font-weight: 700;
      margin: 0;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      text-align: left;
    }

    .subtitle {
      font-size: 1.25rem;
      opacity: 0.9;
      text-align: left;
      margin: 0;
    }

    .reminder-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: -1.5rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .view-toggle {
      display: flex;
      gap: 0.5rem;
      background: rgba(255, 255, 255, 0.2);
      padding: 0.25rem;
      border-radius: var(--radius-sm);
      backdrop-filter: blur(10px);
    }

    .view-toggle-btn {
      padding: 0.5rem 1rem;
      border: none;
      background: transparent;
      color: white;
      border-radius: var(--radius-sm);
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.2s;
    }

    .view-toggle-btn:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .view-toggle-btn.active {
      background: white;
      color: var(--primary-color);
      font-weight: 600;
    }

    .list-view {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .person-group {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 1.5rem;
      box-shadow: var(--shadow-md);
      border: 1px solid var(--border-color);
    }

    .person-group-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid var(--border-color);
    }

    .person-group-name {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text-primary);
    }

    .person-group-relationship {
      font-size: 0.9rem;
      color: var(--text-secondary);
    }

    .person-reminders-list {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .list-reminder-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem;
      background: var(--bg-color);
      border-radius: var(--radius-sm);
      border: 1px solid var(--border-color);
      transition: all 0.2s;
    }

    .list-reminder-item:hover {
      background: #e2e8f0;
      transform: translateX(4px);
    }

    .list-reminder-left {
      display: flex;
      align-items: center;
      gap: 1rem;
      flex: 1;
    }

    .list-reminder-icon {
      font-size: 1.5rem;
    }

    .list-reminder-info {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .list-reminder-event-type {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      background: var(--primary-color);
      color: white;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 500;
      width: fit-content;
    }

    .list-reminder-right {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .list-reminder-date {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-primary);
      min-width: 80px;
    }

    .list-reminder-actions {
      display: flex;
      gap: 0.5rem;
    }

    .filter-tabs {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .filter-tab {
      padding: 0.5rem 1rem;
      border: none;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border-radius: var(--radius-sm);
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.2s;
      backdrop-filter: blur(10px);
    }

    .filter-tab:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .filter-tab.active {
      background: white;
      color: var(--primary-color);
      font-weight: 600;
    }

    .btn {
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: var(--radius-sm);
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-primary {
      background: white;
      color: var(--primary-color);
      box-shadow: var(--shadow-md);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .btn-secondary {
      background: var(--border-color);
      color: var(--text-primary);
    }

    .btn-secondary:hover {
      background: #cbd5e1;
    }

    .upcoming-section,
    .all-reminders-section {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 1.5rem;
      padding-bottom: 3rem;
      margin-top: -0.5rem;
      margin-bottom: 1rem;
      box-shadow: var(--shadow-lg);
    }

    .upcoming-section h2,
    .all-reminders-section h2 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: var(--text-primary);
    }

    .reminder-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1rem;
    }

    .empty-state {
      text-align: center;
      padding: 2rem 1rem;
      color: var(--text-secondary);
    }

    .empty-state p {
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
    }

    .empty-state .hint {
      font-size: 0.9rem;
      opacity: 0.7;
    }

    .reminder-card {
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 1rem;
      box-shadow: var(--shadow-md);
      transition: all 0.3s;
      border: 2px solid var(--border-color);
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .reminder-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
      border-color: var(--primary-color);
    }

    .reminder-card.upcoming {
      border-color: var(--warning-color);
      background: linear-gradient(135deg, #fff7ed 0%, #ffffff 100%);
    }

    .reminder-card .event-type {
      background: var(--primary-color);
    }

    .reminder-card.today {
      border-color: var(--success-color);
      background: linear-gradient(135deg, #ecfdf5 0%, #ffffff 100%);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% {
        box-shadow: var(--shadow-md);
      }
      50% {
        box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.1);
      }
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .event-icon {
      font-size: 2.5rem;
      line-height: 1;
    }

    .event-info {
      flex: 1;
    }

    .person-name {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 0.25rem;
    }

    .event-type {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      background: var(--primary-color);
      color: white;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 500;
    }

    .card-body {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .relationship {
      font-size: 0.9rem;
      color: var(--text-secondary);
    }

    .relationship .label {
      font-weight: 500;
    }

    .date-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem;
      background: var(--bg-color);
      border-radius: var(--radius-sm);
    }

    .date {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--text-primary);
    }

    .days-until {
      padding: 0.5rem 1rem;
      border-radius: var(--radius-sm);
      font-size: 0.9rem;
      font-weight: 600;
      background: var(--border-color);
      color: var(--text-secondary);
    }

    .days-until.urgent {
      background: var(--warning-color);
      color: white;
    }

    .days-until.today-badge {
      background: var(--success-color);
      color: white;
      animation: bounce 1s infinite;
    }

    @keyframes bounce {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-4px);
      }
    }

    .notes {
      padding-top: 0.75rem;
      border-top: 1px solid var(--border-color);
    }

    .notes p {
      font-size: 0.9rem;
      color: var(--text-secondary);
      line-height: 1.6;
      font-style: italic;
    }

    .card-actions {
      display: flex;
      gap: 0.5rem;
      padding-top: 0.75rem;
      border-top: 1px solid var(--border-color);
    }

    .action-btn {
      flex: 1;
      padding: 0.5rem 1rem;
      border: none;
      border-radius: var(--radius-sm);
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .edit-btn {
      background: var(--primary-color);
      color: white;
    }

    .edit-btn:hover {
      background: var(--primary-dark);
      transform: translateY(-1px);
    }

    .delete-btn {
      background: var(--danger-color);
      color: white;
    }

    .delete-btn:hover {
      background: #dc2626;
      transform: translateY(-1px);
    }

    .form-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 1rem;
      backdrop-filter: blur(4px);
      animation: fadeIn 0.2s;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    .form-modal {
      background: var(--card-bg);
      border-radius: var(--radius);
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: var(--shadow-lg);
      animation: slideUp 0.3s;
    }

    @keyframes slideUp {
      from {
        transform: translateY(20px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .form-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem;
      border-bottom: 1px solid var(--border-color);
    }

    .form-header h2 {
      font-size: 1.5rem;
      color: var(--text-primary);
    }

    .close-btn {
      width: 32px;
      height: 32px;
      border: none;
      background: var(--border-color);
      border-radius: 50%;
      font-size: 1.5rem;
      line-height: 1;
      cursor: pointer;
      color: var(--text-secondary);
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .close-btn:hover {
      background: var(--danger-color);
      color: white;
      transform: rotate(90deg);
    }

    .reminder-form {
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .form-group label {
      font-weight: 600;
      color: var(--text-primary);
      font-size: 0.9rem;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      padding: 0.75rem;
      border: 2px solid var(--border-color);
      border-radius: var(--radius-sm);
      font-size: 1rem;
      font-family: inherit;
      transition: all 0.2s;
      background: var(--card-bg);
      color: var(--text-primary);
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }

    .form-group textarea {
      resize: vertical;
      min-height: 80px;
    }

    .form-actions {
      display: flex;
      gap: 1rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border-color);
    }

    .form-actions .btn {
      flex: 1;
    }

    @media (max-width: 768px) {
      .app {
        padding: 1rem 0.5rem;
      }

      .reminder-grid {
        grid-template-columns: 1fr;
      }
      
      .reminder-header {
        flex-direction: column;
        align-items: flex-start;
      }

      .header-left {
        width: 100%;
      }

      .mascot-container {
        width: 100%;
        justify-content: center;
      }

      .mascot-container {
        margin-left: 0;
      }

      .mascot-image {
        width: 260px;
        height: 260px;
      }

      .reminder-header h1 {
        font-size: 2rem;
        font-family: 'Unbounded', sans-serif;
      }
      
      .upcoming-section,
      .all-reminders-section {
        padding: 1rem;
      }

      .list-reminder-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }

      .list-reminder-right {
        width: 100%;
        justify-content: space-between;
        flex-wrap: wrap;
      }

      .person-group {
        padding: 1rem;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const STORAGE_KEY = 'drewlry-reminders';

    const EVENT_TYPE_LABELS = {
      birthday: 'Birthday',
      anniversary: 'Anniversary',
      holiday: 'Holiday',
      other: 'Other',
    };

    const EVENT_TYPE_ICONS = {
      birthday: 'ðŸŽ‚',
      anniversary: 'ðŸ’',
      holiday: 'ðŸŽ‰',
      other: 'ðŸ“Œ',
    };

    const EVENT_TYPES = [
      { value: 'birthday', label: 'Birthday' },
      { value: 'anniversary', label: 'Anniversary' },
      { value: 'holiday', label: 'Holiday' },
      { value: 'other', label: 'Other' },
    ];

    // Storage utilities
    const getReminders = () => {
      try {
        const data = localStorage.getItem(STORAGE_KEY);
        return data ? JSON.parse(data) : [];
      } catch {
        return [];
      }
    };

    const saveReminders = (reminders) => {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(reminders));
      } catch (error) {
        console.error('Failed to save reminders:', error);
      }
    };

    const addReminder = (reminder) => {
      const reminders = getReminders();
      const newReminder = {
        ...reminder,
        id: Date.now().toString(),
        createdAt: new Date().toISOString(),
      };
      reminders.push(newReminder);
      saveReminders(reminders);
      return newReminder;
    };

    const updateReminder = (id, updates) => {
      const reminders = getReminders();
      const index = reminders.findIndex(r => r.id === id);
      if (index === -1) return false;
      reminders[index] = { ...reminders[index], ...updates };
      saveReminders(reminders);
      return true;
    };

    const deleteReminder = (id) => {
      const reminders = getReminders();
      const filtered = reminders.filter(r => r.id !== id);
      if (filtered.length === reminders.length) return false;
      saveReminders(filtered);
      return true;
    };

    // Date utilities
    const parseISO = (dateStr) => {
      return new Date(dateStr);
    };

    const format = (date, formatStr) => {
      const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
      if (formatStr === 'MMM d') {
        return `${monthNames[date.getMonth()]} ${date.getDate()}`;
      }
      return date.toLocaleDateString();
    };

    const differenceInDays = (date1, date2) => {
      const oneDay = 24 * 60 * 60 * 1000;
      return Math.round((date1 - date2) / oneDay);
    };

    const isPast = (date) => {
      return date < new Date();
    };

    const addYears = (date, years) => {
      const newDate = new Date(date);
      newDate.setFullYear(newDate.getFullYear() + years);
      return newDate;
    };

    // ReminderCard Component 
    function ReminderCard({ reminder, daysUntil, onEdit, onDelete }) {
      const date = parseISO(reminder.date);
      const isUpcoming = daysUntil <= 7;
      const isToday = daysUntil === 0;
      const isPast = daysUntil < 0;

      const getDaysText = () => {
        if (isToday) return 'Today!';
        if (isPast) return `${Math.abs(daysUntil)} days ago`;
        if (daysUntil === 1) return 'Tomorrow';
        return `In ${daysUntil} days`;
      };

      return (
        <div className={`reminder-card ${isUpcoming ? 'upcoming' : ''} ${isToday ? 'today' : ''}`}>
          <div className="card-header">
            <div className="event-icon">{EVENT_TYPE_ICONS[reminder.eventType]}</div>
            <div className="event-info">
              <h3 className="person-name">{reminder.name}</h3>
              <span className="event-type">{EVENT_TYPE_LABELS[reminder.eventType]}</span>
            </div>
          </div>

          <div className="card-body">
            {reminder.relationship && (
              <div className="relationship">
                <span className="label">Relationship: </span>
                <span>{reminder.relationship}</span>
              </div>
            )}
            
            <div className="date-info">
              <span className="date">
                {format(date, 'MMM d')}
              </span>
              <span className={`days-until ${isToday ? 'today-badge' : ''} ${isUpcoming ? 'urgent' : ''}`}>
                {getDaysText()}
              </span>
            </div>

            {reminder.notes && (
              <div className="notes">
                <p>{reminder.notes}</p>
              </div>
            )}
          </div>

          <div className="card-actions">
            <button className="action-btn edit-btn" onClick={() => onEdit(reminder)}>
              Edit
            </button>
            <button className="action-btn delete-btn" onClick={() => onDelete(reminder.id)}>
              Delete
            </button>
          </div>
        </div>
      );
    }

    // ReminderForm Component
    function ReminderForm({ reminder, onSave, onCancel }) {
      const [formData, setFormData] = useState({
        name: '',
        relationship: '',
        eventType: 'birthday',
        date: '',
        notes: '',
      });

      useEffect(() => {
        if (reminder) {
          setFormData({
            name: reminder.name,
            relationship: reminder.relationship,
            eventType: reminder.eventType,
            date: reminder.date,
            notes: reminder.notes || '',
          });
        }
      }, [reminder]);

      const handleSubmit = (e) => {
        e.preventDefault();
        if (!formData.name || !formData.date) {
          alert('Please fill in name and date');
          return;
        }
        onSave(formData);
      };

      return (
        <div className="form-overlay">
          <div className="form-modal">
            <div className="form-header">
              <h2>{reminder ? 'Edit Reminder' : 'Add Reminder'}</h2>
              <button className="close-btn" onClick={onCancel}>Ã—</button>
            </div>

            <form onSubmit={handleSubmit} className="reminder-form">
              <div className="form-group">
                <label htmlFor="name">Name *</label>
                <input
                  id="name"
                  type="text"
                  value={formData.name}
                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                  placeholder="Enter name"
                  required
                />
              </div>

              <div className="form-group">
                <label htmlFor="relationship">Relationship</label>
                <input
                  id="relationship"
                  type="text"
                  value={formData.relationship}
                  onChange={(e) => setFormData({ ...formData, relationship: e.target.value })}
                  placeholder="e.g., Friend, Family, Colleague"
                />
              </div>

              <div className="form-group">
                <label htmlFor="eventType">Event Type *</label>
                <select
                  id="eventType"
                  value={formData.eventType}
                  onChange={(e) => setFormData({ ...formData, eventType: e.target.value })}
                  required
                >
                  {EVENT_TYPES.map(type => (
                    <option key={type.value} value={type.value}>
                      {type.label}
                    </option>
                  ))}
                </select>
              </div>

              <div className="form-group">
                <label htmlFor="date">Date *</label>
                <input
                  id="date"
                  type="date"
                  value={formData.date}
                  onChange={(e) => setFormData({ ...formData, date: e.target.value })}
                  required
                />
              </div>

              <div className="form-group">
                <label htmlFor="notes">Notes</label>
                <textarea
                  id="notes"
                  value={formData.notes}
                  onChange={(e) => setFormData({ ...formData, notes: e.target.value })}
                  placeholder="Add some notes..."
                  rows={3}
                />
              </div>

              <div className="form-actions">
                <button type="button" className="btn btn-secondary" onClick={onCancel}>
                  Cancel
                </button>
                <button type="submit" className="btn btn-primary">
                  {reminder ? 'Update' : 'Add'}
                </button>
              </div>
            </form>
          </div>
        </div>
      );
    }

    // ReminderPage Component
    function ReminderPage() {
      const [reminders, setReminders] = useState([]);
      const [showForm, setShowForm] = useState(false);
      const [editingReminder, setEditingReminder] = useState(null);
      const [filter, setFilter] = useState('all');
      const [viewMode, setViewMode] = useState('card');

      useEffect(() => {
        loadReminders();
      }, []);

      const loadReminders = () => {
        const loaded = getReminders();
        setReminders(loaded);
      };

      const handleAdd = (data) => {
        addReminder(data);
        loadReminders();
        setShowForm(false);
      };

      const handleUpdate = (id, data) => {
        updateReminder(id, data);
        loadReminders();
        setEditingReminder(null);
      };

      const handleDelete = (id) => {
        if (confirm('Are you sure you want to delete this reminder?')) {
          deleteReminder(id);
          loadReminders();
        }
      };

      const handleEdit = (reminder) => {
        setEditingReminder(reminder);
        setShowForm(true);
      };

      const getDaysUntil = (dateStr) => {
        const date = parseISO(dateStr);
        const today = new Date();
        const thisYear = new Date(today.getFullYear(), date.getMonth(), date.getDate());
        const nextYear = addYears(thisYear, 1);
        
        if (isPast(thisYear)) {
          return differenceInDays(nextYear, today);
        }
        return differenceInDays(thisYear, today);
      };

      const filteredReminders = reminders
        .filter(r => filter === 'all' || r.eventType === filter)
        .sort((a, b) => {
          const daysA = getDaysUntil(a.date);
          const daysB = getDaysUntil(b.date);
          return daysA - daysB;
        });

      const upcomingReminders = filteredReminders.filter(r => getDaysUntil(r.date) <= 30);

      // Group reminders by person name for list view
      const groupByPerson = (reminders) => {
        const grouped = {};
        reminders.forEach(reminder => {
          // Normalize name: trim whitespace, convert to lowercase for comparison
          const normalizedName = reminder.name.trim().toLowerCase();
          const displayName = reminder.name.trim();
          
          // Use normalized name as key for grouping
          if (!grouped[normalizedName]) {
            grouped[normalizedName] = {
              name: displayName,
              relationship: reminder.relationship,
              reminders: []
            };
          }
          grouped[normalizedName].reminders.push(reminder);
        });
        // Sort reminders within each group by date
        Object.values(grouped).forEach(group => {
          group.reminders.sort((a, b) => {
            const daysA = getDaysUntil(a.date);
            const daysB = getDaysUntil(b.date);
            return daysA - daysB;
          });
        });
        return Object.values(grouped).sort((a, b) => a.name.localeCompare(b.name));
      };

      const groupedReminders = groupByPerson(filteredReminders);

      return (
        <div className="reminder-page">
          <header className="reminder-header">
            <div className="header-left">
              <div className="header-left-content">
                <h1>Drew's Reminder</h1>
                <p className="subtitle">Manage important dates for friends and family</p>
              </div>
              <div className="filter-tabs">
                <button 
                  className={`filter-tab ${filter === 'all' ? 'active' : ''}`}
                  onClick={() => setFilter('all')}
                >
                  All
                </button>
                {Object.entries(EVENT_TYPE_LABELS).map(([key, label]) => (
                  <button
                    key={key}
                    className={`filter-tab ${filter === key ? 'active' : ''}`}
                    onClick={() => setFilter(key)}
                  >
                    {label}
                  </button>
                ))}
              </div>
            </div>
            <div className="mascot-container">
              <img 
                src="Drew-avatar.png" 
                alt="AI Gifting Mascot" 
                className="mascot-image"
                onError={(e) => {
                  e.target.style.display = 'none';
                }}
              />
            </div>
          </header>

          <div className="reminder-controls">
            <button 
              className="btn btn-primary"
              onClick={() => {
                setEditingReminder(null);
                setShowForm(true);
              }}
            >
              + Add Reminder
            </button>
            <div className="view-toggle">
              <button
                className={`view-toggle-btn ${viewMode === 'card' ? 'active' : ''}`}
                onClick={() => setViewMode('card')}
                title="Card View"
              >
                ðŸ“‹ Cards
              </button>
              <button
                className={`view-toggle-btn ${viewMode === 'list' ? 'active' : ''}`}
                onClick={() => setViewMode('list')}
                title="List View by Person"
              >
                By Person
              </button>
            </div>
          </div>

          {upcomingReminders.length > 0 && (
            <section className="upcoming-section">
              <h2>ðŸ“… Upcoming (within 30 days)</h2>
              <div className="reminder-grid">
                {upcomingReminders.map(reminder => (
                  <ReminderCard
                    key={reminder.id}
                    reminder={reminder}
                    daysUntil={getDaysUntil(reminder.date)}
                    onEdit={handleEdit}
                    onDelete={handleDelete}
                  />
                ))}
              </div>
            </section>
          )}

          <section className="all-reminders-section">
            <h2>ðŸ“‹ All Reminders ({filteredReminders.length})</h2>
            {filteredReminders.length === 0 ? (
              <div className="empty-state">
                <p>No reminders added yet</p>
                <p className="hint">Click "Add Reminder" to start tracking important dates!</p>
              </div>
            ) : viewMode === 'card' ? (
              <div className="reminder-grid">
                {filteredReminders.map(reminder => (
                  <ReminderCard
                    key={reminder.id}
                    reminder={reminder}
                    daysUntil={getDaysUntil(reminder.date)}
                    onEdit={handleEdit}
                    onDelete={handleDelete}
                  />
                ))}
              </div>
            ) : (
              <div className="list-view">
                {groupedReminders.map((group, index) => (
                  <div key={index} className="person-group">
                    <div className="person-group-header">
                      <div>
                        <div className="person-group-name">{group.name}</div>
                        {group.relationship && (
                          <div className="person-group-relationship">{group.relationship}</div>
                        )}
                      </div>
                    </div>
                    <div className="person-reminders-list">
                      {group.reminders.map(reminder => {
                        const daysUntil = getDaysUntil(reminder.date);
                        const isUpcoming = daysUntil <= 7;
                        const isToday = daysUntil === 0;
                        const isPast = daysUntil < 0;
                        const date = parseISO(reminder.date);
                        
                        const getDaysText = () => {
                          if (isToday) return 'Today!';
                          if (isPast) return `${Math.abs(daysUntil)} days ago`;
                          if (daysUntil === 1) return 'Tomorrow';
                          return `In ${daysUntil} days`;
                        };

                        return (
                          <div key={reminder.id} className="list-reminder-item">
                            <div className="list-reminder-left">
                              <div className="list-reminder-icon">
                                {EVENT_TYPE_ICONS[reminder.eventType]}
                              </div>
                              <div className="list-reminder-info">
                                <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>
                                  <span className="list-reminder-event-type">
                                    {EVENT_TYPE_LABELS[reminder.eventType]}
                                  </span>
                                </div>
                                {reminder.notes && (
                                  <div style={{ fontSize: '0.85rem', color: 'var(--text-secondary)', fontStyle: 'italic', marginTop: '0.25rem' }}>
                                    {reminder.notes}
                                  </div>
                                )}
                              </div>
                            </div>
                            <div className="list-reminder-right">
                              <div className="list-reminder-date">
                                {format(date, 'MMM d')}
                              </div>
                              <span className={`days-until ${isToday ? 'today-badge' : ''} ${isUpcoming ? 'urgent' : ''}`}>
                                {getDaysText()}
                              </span>
                              <div className="list-reminder-actions">
                                <button 
                                  className="action-btn edit-btn" 
                                  onClick={() => handleEdit(reminder)}
                                  style={{ padding: '0.4rem 0.8rem', fontSize: '0.85rem' }}
                                >
                                  Edit
                                </button>
                                <button 
                                  className="action-btn delete-btn" 
                                  onClick={() => handleDelete(reminder.id)}
                                  style={{ padding: '0.4rem 0.8rem', fontSize: '0.85rem' }}
                                >
                                  Delete
                                </button>
                              </div>
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  </div>
                ))}
              </div>
            )}
          </section>

          {showForm && (
            <ReminderForm
              reminder={editingReminder}
              onSave={editingReminder 
                ? (data) => handleUpdate(editingReminder.id, data)
                : handleAdd
              }
              onCancel={() => {
                setShowForm(false);
                setEditingReminder(null);
              }}
            />
          )}
        </div>
      );
    }

    // App Component
    function App() {
      return (
        <div className="app">
          <ReminderPage />
        </div>
      );
    }

    // Render
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
